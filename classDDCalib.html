<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DesktopDigitizer6: DDCalib Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DesktopDigitizer6
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classDDCalib-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DDCalib Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="DDCalib_8hh_source.html">DDCalib.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for DDCalib:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classDDCalib.png" usemap="#DDCalib_map" alt=""/>
  <map id="DDCalib_map" name="DDCalib_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab7251aa97fb5905e2224ea7e49ebc758"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#ab7251aa97fb5905e2224ea7e49ebc758">DDCalib</a> (TString path)</td></tr>
<tr class="separator:ab7251aa97fb5905e2224ea7e49ebc758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3324499fb6ae18f155f7604bf3de4428"><td class="memItemLeft" align="right" valign="top"><a id="a3324499fb6ae18f155f7604bf3de4428"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#a3324499fb6ae18f155f7604bf3de4428">~DDCalib</a> ()</td></tr>
<tr class="memdesc:a3324499fb6ae18f155f7604bf3de4428"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default destructor. <br /></td></tr>
<tr class="separator:a3324499fb6ae18f155f7604bf3de4428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768e8a42ffa9aa2d413bfda80d472e1d"><td class="memItemLeft" align="right" valign="top"><a id="a768e8a42ffa9aa2d413bfda80d472e1d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#a768e8a42ffa9aa2d413bfda80d472e1d">Calibrate</a> (void)</td></tr>
<tr class="memdesc:a768e8a42ffa9aa2d413bfda80d472e1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs calibration according to the provided configuration file. <br /></td></tr>
<tr class="separator:a768e8a42ffa9aa2d413bfda80d472e1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0eb53c4c51111fc574776bf4fddccfa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#aa0eb53c4c51111fc574776bf4fddccfa">GetTree</a> (void)</td></tr>
<tr class="separator:aa0eb53c4c51111fc574776bf4fddccfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc0085f05c7031689e3b30172ef51e4f"><td class="memItemLeft" align="right" valign="top"><a id="adc0085f05c7031689e3b30172ef51e4f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#adc0085f05c7031689e3b30172ef51e4f">Print</a> (void)</td></tr>
<tr class="memdesc:adc0085f05c7031689e3b30172ef51e4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints details of the <a class="el" href="classDDCalib.html">DDCalib</a> class object. <br /></td></tr>
<tr class="separator:adc0085f05c7031689e3b30172ef51e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d07a821c2b674db6384e7f70652ca6c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#a1d07a821c2b674db6384e7f70652ca6c">ReadConfig</a> (void)</td></tr>
<tr class="separator:a1d07a821c2b674db6384e7f70652ca6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a46c11759dd24bf059f28c00b0ead8871"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#a46c11759dd24bf059f28c00b0ead8871">CalibType</a> { <b>AmplitudePeakCalib</b> = 0x01, 
<b>ChargePeakCalib</b> = 0x02, 
<b>EnergyPeakCalib</b> = 0x04
 }</td></tr>
<tr class="separator:a46c11759dd24bf059f28c00b0ead8871"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a0ab69429fcdc66ccb98e895ee7c8f049"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDDCalibAmp.html">DDCalibAmp</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#a0ab69429fcdc66ccb98e895ee7c8f049">fAmpCalib</a></td></tr>
<tr class="separator:a0ab69429fcdc66ccb98e895ee7c8f049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a562c6c7edc6caf351c0d2fb68a13e46d"><td class="memItemLeft" align="right" valign="top"><a id="a562c6c7edc6caf351c0d2fb68a13e46d"></a>
std::vector&lt; <a class="el" href="classDDCalibBase.html">DDCalibBase</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#a562c6c7edc6caf351c0d2fb68a13e46d">fCalibFunctions</a></td></tr>
<tr class="memdesc:a562c6c7edc6caf351c0d2fb68a13e46d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector containing calibration objects. <br /></td></tr>
<tr class="separator:a562c6c7edc6caf351c0d2fb68a13e46d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae639ae633a3831265b478372c764363f"><td class="memItemLeft" align="right" valign="top"><a id="ae639ae633a3831265b478372c764363f"></a>
Int_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#ae639ae633a3831265b478372c764363f">fCh</a></td></tr>
<tr class="memdesc:ae639ae633a3831265b478372c764363f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of the channel to be analyzed. <br /></td></tr>
<tr class="separator:ae639ae633a3831265b478372c764363f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15eb76f1e94dc87f064cacffa53d1114"><td class="memItemLeft" align="right" valign="top"><a id="a15eb76f1e94dc87f064cacffa53d1114"></a>
<a class="el" href="classDDCalibEnergy.html">DDCalibEnergy</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#a15eb76f1e94dc87f064cacffa53d1114">fEnergyCalib</a></td></tr>
<tr class="memdesc:a15eb76f1e94dc87f064cacffa53d1114"><td class="mdescLeft">&#160;</td><td class="mdescRight">Template object for the energy calibration. <br /></td></tr>
<tr class="separator:a15eb76f1e94dc87f064cacffa53d1114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70a84e404ef3e4d8e7bd65e71cdf7cd0"><td class="memItemLeft" align="right" valign="top"><a id="a70a84e404ef3e4d8e7bd65e71cdf7cd0"></a>
TFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#a70a84e404ef3e4d8e7bd65e71cdf7cd0">fInputFile</a></td></tr>
<tr class="memdesc:a70a84e404ef3e4d8e7bd65e71cdf7cd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input ROOT file containing data from the calibration measurement. <br /></td></tr>
<tr class="separator:a70a84e404ef3e4d8e7bd65e71cdf7cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab65b13e69bb3eb9cb1baebf13783c3ce"><td class="memItemLeft" align="right" valign="top"><a id="ab65b13e69bb3eb9cb1baebf13783c3ce"></a>
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#ab65b13e69bb3eb9cb1baebf13783c3ce">fMethod</a></td></tr>
<tr class="memdesc:ab65b13e69bb3eb9cb1baebf13783c3ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calibration method. <br /></td></tr>
<tr class="separator:ab65b13e69bb3eb9cb1baebf13783c3ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744a786d64f37d9d23eba1b6643c1cff"><td class="memItemLeft" align="right" valign="top"><a id="a744a786d64f37d9d23eba1b6643c1cff"></a>
Int_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#a744a786d64f37d9d23eba1b6643c1cff">fNPeaks</a></td></tr>
<tr class="memdesc:a744a786d64f37d9d23eba1b6643c1cff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of peaks for the calibration procedure. <br /></td></tr>
<tr class="separator:a744a786d64f37d9d23eba1b6643c1cff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c59cc3d165d792f0680f9fffae321fa"><td class="memItemLeft" align="right" valign="top"><a id="a5c59cc3d165d792f0680f9fffae321fa"></a>
TFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#a5c59cc3d165d792f0680f9fffae321fa">fOutputFile</a></td></tr>
<tr class="memdesc:a5c59cc3d165d792f0680f9fffae321fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output ROOT containing results of the calibration. <br /></td></tr>
<tr class="separator:a5c59cc3d165d792f0680f9fffae321fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5b2720770e8280a26502cd7bc49b83e"><td class="memItemLeft" align="right" valign="top"><a id="ab5b2720770e8280a26502cd7bc49b83e"></a>
TString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#ab5b2720770e8280a26502cd7bc49b83e">fPath</a></td></tr>
<tr class="memdesc:ab5b2720770e8280a26502cd7bc49b83e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Path to the directory containing data files. <br /></td></tr>
<tr class="separator:ab5b2720770e8280a26502cd7bc49b83e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab84a704fedf62e21cab617fd9af1a7bc"><td class="memItemLeft" align="right" valign="top"><a id="ab84a704fedf62e21cab617fd9af1a7bc"></a>
<a class="el" href="classDDCalibPE.html">DDCalibPE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#ab84a704fedf62e21cab617fd9af1a7bc">fPECalib</a></td></tr>
<tr class="memdesc:ab84a704fedf62e21cab617fd9af1a7bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Template object for the PE calibration. <br /></td></tr>
<tr class="separator:ab84a704fedf62e21cab617fd9af1a7bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad267832c2d09dec35ddee82c839f03e"><td class="memItemLeft" align="right" valign="top"><a id="aad267832c2d09dec35ddee82c839f03e"></a>
TTree *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalib.html#aad267832c2d09dec35ddee82c839f03e">fTree</a></td></tr>
<tr class="memdesc:aad267832c2d09dec35ddee82c839f03e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tree containing data from the calibration measurememnt. <br /></td></tr>
<tr class="separator:aad267832c2d09dec35ddee82c839f03e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p class="">Class performing calibration based on the provided configuration file "calib_config.txt". Configuration file should be in the same directory as the analyzed data. This class accesses already digitized trees, so digitization with digit and calibration factors 1 should be run before calibration.</p>
<p class="">Configuration file syntax:</p><ul>
<li>CH - channel number</li>
<li>CAL - calibration method. Available options are: PE_CUT - PE calibration based on cuts on the amplitude spectrum, PE_SUM - PE calibration with the sum of Gaussians fitted to the charge spectrum, EN - energy calibration.</li>
<li>NPEAKS - number of peaks in the calibration procedure</li>
<li>PEAK_MIN PEAK_MAX - for the PE_CUT method, lower and upper ranges of the peaks in the amplitude spectrum</li>
<li>FIT_MIN FIT_MAX - for the PE_SUM method, lower and upper range of the fit</li>
<li>CONST MEAN SIGMA - for the PE_SUM method, parameters of the peaks in the charge spectrum</li>
<li>PEAK_ID PEAK_POS PEAK_WIDTH - for the EN method, parameters of the peaks in the charge spectrum, where ID is energy in keV</li>
</ul>
<p class="">Both methods of the PE calibration can be used simultaneusly. Channel number, calibration method and number of peaks should be listed in the beginning of the file, while the other parameters can be listed in any order. Results of the calibration are saved in ROOT files in form of histograms with fitted functions and calibration curves. </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a46c11759dd24bf059f28c00b0ead8871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c11759dd24bf059f28c00b0ead8871">&#9670;&nbsp;</a></span>CalibType</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classDDCalib.html#a46c11759dd24bf059f28c00b0ead8871">DDCalib::CalibType</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Enumeration which elements represent available calibration methods:</p><ul>
<li>AmplitudePeakCalib / PE_CUT / PE calibratin with the cut based on amplitude</li>
<li>ChargePeakCalib / PE_SUM / PE calibration with the sum of Gaussians</li>
<li>EnergyPeakCalib / EN / energy calibration </li>
</ul>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab7251aa97fb5905e2224ea7e49ebc758"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7251aa97fb5905e2224ea7e49ebc758">&#9670;&nbsp;</a></span>DDCalib()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DDCalib::DDCalib </td>
          <td>(</td>
          <td class="paramtype">TString&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Standard constructor. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>- path to the directory containing data files </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa0eb53c4c51111fc574776bf4fddccfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0eb53c4c51111fc574776bf4fddccfa">&#9670;&nbsp;</a></span>GetTree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DDCalib::GetTree </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Accesses tree containing data from the calibration measurement. By default Fixed Threshold data is accessed first, if it is not present in the ROOT file, then Constant Fraction tree is accessed. </p>

</div>
</div>
<a id="a1d07a821c2b674db6384e7f70652ca6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d07a821c2b674db6384e7f70652ca6c">&#9670;&nbsp;</a></span>ReadConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DDCalib::ReadConfig </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Reads configuration file "calib_config.txt" and sets values to the private members of the class necessary for the calibration: </p>
<ul>
<li>channel number</li>
<li>calibration method</li>
<li>number of peaks</li>
<li>parameters for PE/charge calibration</li>
<li>fit range for PE/charge calibration</li>
<li>parameters for PE/Amp calibration</li>
<li>parameters for energy calibration </li>
</ul>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a0ab69429fcdc66ccb98e895ee7c8f049"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ab69429fcdc66ccb98e895ee7c8f049">&#9670;&nbsp;</a></span>fAmpCalib</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDDCalibAmp.html">DDCalibAmp</a>* DDCalib::fAmpCalib</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Template object for the PE calibration with the cuts based on signals amplitude </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="DDCalib_8hh_source.html">DDCalib.hh</a></li>
<li>src/DDCalib.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
