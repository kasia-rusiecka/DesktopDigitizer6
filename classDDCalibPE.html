<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DesktopDigitizer6: DDCalibPE Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DesktopDigitizer6
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classDDCalibPE-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DDCalibPE Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="DDCalibPE_8hh_source.html">DDCalibPE.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for DDCalibPE:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classDDCalibPE.png" usemap="#DDCalibPE_map" alt=""/>
  <map id="DDCalibPE_map" name="DDCalibPE_map">
<area href="classDDCalibBase.html" title="Base class for the calibration procedure. " alt="DDCalibBase" shape="rect" coords="0,56,87,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDDCalibPE_1_1ChargePeak.html">ChargePeak</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab87ef36c453eca4789aaa09b05867563"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibPE.html#ab87ef36c453eca4789aaa09b05867563">DDCalibPE</a> (Int_t npeaks)</td></tr>
<tr class="separator:ab87ef36c453eca4789aaa09b05867563"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d57e8ccb4c1c28655a9354a2cf5e286"><td class="memItemLeft" align="right" valign="top"><a id="a0d57e8ccb4c1c28655a9354a2cf5e286"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibPE.html#a0d57e8ccb4c1c28655a9354a2cf5e286">~DDCalibPE</a> ()</td></tr>
<tr class="memdesc:a0d57e8ccb4c1c28655a9354a2cf5e286"><td class="mdescLeft">&#160;</td><td class="mdescRight">Standard destructor. <br /></td></tr>
<tr class="separator:a0d57e8ccb4c1c28655a9354a2cf5e286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e80c0c3cf1091b3cc7187dabf2a116"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibPE.html#a23e80c0c3cf1091b3cc7187dabf2a116">AddPeak</a> (Float_t constant, Float_t mean, Float_t sigma)</td></tr>
<tr class="separator:a23e80c0c3cf1091b3cc7187dabf2a116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbb26e3e044d590f5372f6b95091798e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibPE.html#afbb26e3e044d590f5372f6b95091798e">Calibrate</a> (TTree *tree, Int_t ch, TFile *file=0)</td></tr>
<tr class="separator:afbb26e3e044d590f5372f6b95091798e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a120743838400061ca902ff7200c74f93"><td class="memItemLeft" align="right" valign="top"><a id="a120743838400061ca902ff7200c74f93"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibPE.html#a120743838400061ca902ff7200c74f93">Print</a> (void)</td></tr>
<tr class="memdesc:a120743838400061ca902ff7200c74f93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints details of the <a class="el" href="classDDCalibPE.html">DDCalibPE</a> class object. <br /></td></tr>
<tr class="separator:a120743838400061ca902ff7200c74f93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff2390bf292348103007a339bb5723f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibPE.html#aff2390bf292348103007a339bb5723f3">SetFitRange</a> (Float_t min, Float_t max)</td></tr>
<tr class="separator:aff2390bf292348103007a339bb5723f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa79ef01c0daa679c953445d71a7d873"><td class="memItemLeft" align="right" valign="top"><a id="aaa79ef01c0daa679c953445d71a7d873"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibPE.html#aaa79ef01c0daa679c953445d71a7d873">Validate</a> (void) const</td></tr>
<tr class="memdesc:aaa79ef01c0daa679c953445d71a7d873"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the <a class="el" href="classDDCalibPE.html">DDCalibPE</a> class object has been created correclty. <br /></td></tr>
<tr class="separator:aaa79ef01c0daa679c953445d71a7d873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classDDCalibBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classDDCalibBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classDDCalibBase.html">DDCalibBase</a></td></tr>
<tr class="memitem:aa8ec40b77d043bedf08b9f339f1f0ade inherit pub_methods_classDDCalibBase"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibBase.html#aa8ec40b77d043bedf08b9f339f1f0ade">DDCalibBase</a> (Int_t npeaks)</td></tr>
<tr class="separator:aa8ec40b77d043bedf08b9f339f1f0ade inherit pub_methods_classDDCalibBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14ba4c524e6c31724645e72e573ffb78 inherit pub_methods_classDDCalibBase"><td class="memItemLeft" align="right" valign="top"><a id="a14ba4c524e6c31724645e72e573ffb78"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibBase.html#a14ba4c524e6c31724645e72e573ffb78">~DDCalibBase</a> ()</td></tr>
<tr class="memdesc:a14ba4c524e6c31724645e72e573ffb78 inherit pub_methods_classDDCalibBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Standard destructor. <br /></td></tr>
<tr class="separator:a14ba4c524e6c31724645e72e573ffb78 inherit pub_methods_classDDCalibBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae1e13fdb41fe73d6cd9dfa165dff6bd0"><td class="memItemLeft" align="right" valign="top"><a id="ae1e13fdb41fe73d6cd9dfa165dff6bd0"></a>
Float_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibPE.html#ae1e13fdb41fe73d6cd9dfa165dff6bd0">fFitMax</a></td></tr>
<tr class="memdesc:ae1e13fdb41fe73d6cd9dfa165dff6bd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fit maximum. <br /></td></tr>
<tr class="separator:ae1e13fdb41fe73d6cd9dfa165dff6bd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa640f39e12b7c51953bc9b8e968229f1"><td class="memItemLeft" align="right" valign="top"><a id="aa640f39e12b7c51953bc9b8e968229f1"></a>
Float_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibPE.html#aa640f39e12b7c51953bc9b8e968229f1">fFitMin</a></td></tr>
<tr class="memdesc:aa640f39e12b7c51953bc9b8e968229f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fit minimum. <br /></td></tr>
<tr class="separator:aa640f39e12b7c51953bc9b8e968229f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c1a5f046c4325167fe587cfdda8fa57"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structDDCalibPE_1_1ChargePeak.html">ChargePeak</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibPE.html#a8c1a5f046c4325167fe587cfdda8fa57">fPeaks</a></td></tr>
<tr class="separator:a8c1a5f046c4325167fe587cfdda8fa57"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classDDCalibBase"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classDDCalibBase')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classDDCalibBase.html">DDCalibBase</a></td></tr>
<tr class="memitem:a7a9fe82d19fb0ca88908dbc8613c505e inherit pro_attribs_classDDCalibBase"><td class="memItemLeft" align="right" valign="top"><a id="a7a9fe82d19fb0ca88908dbc8613c505e"></a>
const Int_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDCalibBase.html#a7a9fe82d19fb0ca88908dbc8613c505e">fNPeaks</a></td></tr>
<tr class="memdesc:a7a9fe82d19fb0ca88908dbc8613c505e inherit pro_attribs_classDDCalibBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of peaks for calibration. <br /></td></tr>
<tr class="separator:a7a9fe82d19fb0ca88908dbc8613c505e inherit pro_attribs_classDDCalibBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p class="">Class responsible for the PE calibration of the charge spectra. In this method a sum of Gaussian functions is fitted to the charge spectrum. starting parameters for the fit are chosen based on the list of peaks along with their basing features defined by the user in the configuration file (see DDcalib class reference). Mean positions of the charge peaks are plotted as a function of number of PE. Calibration factor is determined in two ways:</p><ul>
<li>based on the linear fit to the peak mean vs. PE graph</li>
<li>as a mean distance between subsequent peaks on the PE spectrum. </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab87ef36c453eca4789aaa09b05867563"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab87ef36c453eca4789aaa09b05867563">&#9670;&nbsp;</a></span>DDCalibPE()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DDCalibPE::DDCalibPE </td>
          <td>(</td>
          <td class="paramtype">Int_t&#160;</td>
          <td class="paramname"><em>npeaks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Standard constructor. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">npeaks</td><td>- number of peaks for the calibration </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a23e80c0c3cf1091b3cc7187dabf2a116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23e80c0c3cf1091b3cc7187dabf2a116">&#9670;&nbsp;</a></span>AddPeak()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DDCalibPE::AddPeak </td>
          <td>(</td>
          <td class="paramtype">Float_t&#160;</td>
          <td class="paramname"><em>constant</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Float_t&#160;</td>
          <td class="paramname"><em>mean</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Float_t&#160;</td>
          <td class="paramname"><em>sigma</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Adds peak to the fPeaks vector, used for the calibration procedure. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">constant</td><td>- peak height </td></tr>
    <tr><td class="paramname">mean</td><td>- peak position </td></tr>
    <tr><td class="paramname">sigma</td><td>- peak sigma. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afbb26e3e044d590f5372f6b95091798e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbb26e3e044d590f5372f6b95091798e">&#9670;&nbsp;</a></span>Calibrate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DDCalibPE::Calibrate </td>
          <td>(</td>
          <td class="paramtype">TTree *&#160;</td>
          <td class="paramname"><em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Int_t&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TFile *&#160;</td>
          <td class="paramname"><em>file</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Performs PE calibration. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tree</td><td>- tree containing calibration measurement </td></tr>
    <tr><td class="paramname">ch</td><td>- channel number </td></tr>
    <tr><td class="paramname">file</td><td>- ROOT output file, where calibration results are saved. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classDDCalibBase.html#ad389768f6d4d7109f2a44783396dc931">DDCalibBase</a>.</p>

</div>
</div>
<a id="aff2390bf292348103007a339bb5723f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff2390bf292348103007a339bb5723f3">&#9670;&nbsp;</a></span>SetFitRange()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DDCalibPE::SetFitRange </td>
          <td>(</td>
          <td class="paramtype">Float_t&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Float_t&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Sets fitting range. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">min</td><td>- fit minimum </td></tr>
    <tr><td class="paramname">max</td><td>- fit maximum </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a8c1a5f046c4325167fe587cfdda8fa57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c1a5f046c4325167fe587cfdda8fa57">&#9670;&nbsp;</a></span>fPeaks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structDDCalibPE_1_1ChargePeak.html">ChargePeak</a>&gt; DDCalibPE::fPeaks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Vector containing all peaks in the charge spectrum for the calibration procedure </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="DDCalibPE_8hh_source.html">DDCalibPE.hh</a></li>
<li>src/DDCalibPE.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
